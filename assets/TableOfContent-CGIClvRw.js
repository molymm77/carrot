import{I as m,p as a,G as h,H as g,o as c,a as l,q as i,F as _,x as b,n as f,aH as x,v as y}from"./index-CIbk9OI3.js";const k=["onClick"],I={__name:"TableOfContent",setup(C){const r=a([]),u=a(""),s=a(!1);function d(){const n=Array.from(document.querySelectorAll("h2, h3, h4, h5"));r.value=n.map(e=>(e.id||(e.id=e.textContent.trim().replace(/\s+/g,"-").toLowerCase()),{id:e.id,text:e.textContent,level:Number(e.tagName.slice(1))}))}function p(n){const e=document.getElementById(n);e&&(e.scrollIntoView({behavior:"smooth",block:"start"}),s.value=!1)}function v(){const n=new IntersectionObserver(e=>{for(const t of e)if(t.isIntersecting){u.value=t.target.id;break}},{rootMargin:"0px 0px -70% 0px",threshold:.1});return r.value.forEach(e=>{const t=document.getElementById(e.id);t&&n.observe(t)}),()=>n.disconnect()}let o;return h(()=>{d(),o=v();const n=new MutationObserver(()=>{d(),o==null||o(),o=v()});n.observe(document.querySelector(".content"),{childList:!0,subtree:!0}),g(()=>{o==null||o(),n.disconnect()})}),(n,e)=>(c(),l("nav",{class:f(["toc",{open:s.value}])},[i("button",{class:"toc-toggle",onClick:e[0]||(e[0]=t=>s.value=!s.value)},"目录"),i("ul",null,[(c(!0),l(_,null,b(r.value,t=>(c(),l("li",{key:t.id,class:f({active:t.id===u.value,[`indent-${t.level}`]:t.level>2})},[i("a",{href:"#",onClick:x(O=>p(t.id),["prevent"])},y(t.text),9,k)],2))),128))])],2))}},B=m(I,[["__scopeId","data-v-5ef4eda2"]]);export{B as T};
